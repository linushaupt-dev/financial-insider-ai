async function loadTicker() {
  const symbols = ["SPY", "DIA", "QQQ", "VIX", "AAPL", "MSFT"];
  const url = `https://query1.finance.yahoo.com/v7/finance/quote?symbols=${symbols.join(",")}`;

  try {
    const res = await fetch(url);
    const data = await res.json();

    if (!data.quoteResponse || !data.quoteResponse.result) {
      document.getElementById("ticker-bar").innerHTML = "Error loading data";
      return;
    }

    const items = data.quoteResponse.result.map(stock => {
      const change = stock.regularMarketChangePercent;
      const dir = change >= 0 ? "up" : "down";
      return `
        <div class="ticker-item ${dir}">
          <strong>${stock.symbol}</strong>&nbsp;
          ${stock.regularMarketPrice.toFixed(2)}&nbsp;
          (${change.toFixed(2)}%)
        </div>
      `;
    });

    document.getElementById("ticker-bar").innerHTML = items.join("");
  } catch (err) {
    document.getElementById("ticker-bar").innerHTML = "Error loading data";
  }
}

loadTicker();
setInterval(loadTicker, 60000);
